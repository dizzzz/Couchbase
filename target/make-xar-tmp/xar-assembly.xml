<?xml version="1.0" encoding="UTF-8"?>
<package xmlns="http://expath.org/ns/pkg" name="http://exist-db.org/couchbase" abbrev="couchbase" version="0.7.1-SNAPSHOT"
    spec="1.0">
    <title>Couchbase driver</title>
    <author id="dizzzz">Dannes Wessels</author>
    <website>https://github.com/weXsol/Couchbase</website>
    <license>GNU Lesser General Public License, version 2.1</license>
    <copyright>true</copyright>

    <!-- should be either "application" or "library" -->
    <type>library</type>
    <!-- type>library</type -->

    <status>stable</status>

    <tag>couchbase</tag>
    <tag>library</tag>
    <tag>couchbase</tag>
    <category id="apps">Applications</category>

    <dependency processor="http://exist-db.org" semver-min="3.6.1" />

    <!-- Collection inside /db/apps where xar-resources will be copied to -->
    <target>couchbase</target>

    <prepare>pre-install.xq</prepare>
    <finish>post-install.xq</finish>

    <permissions user="couchbase" group="couchbase" mode="rw-rw-r--"/>
    <note>When upgrading: please first uninstall all previous versions and restart eXist-db.</note>
    <changelog>
        <change version="0.5.5">
            <ul xmlns="http://www.w3.org/1999/xhtml">
                <li>Another improvement on JSON conversion: Support of more datatypes.</li>
            </ul>
        </change>
        <change version="0.5.4">
            <ul xmlns="http://www.w3.org/1999/xhtml">
                <li>Improved conversion of XQuery-JSON objects to Couchbase-JSON objects and vice versa.</li>
                <li>Upgrade to Java driver version v2.4.3.</li>
            </ul>
        </change>
    </changelog>


    <!-- includes everything in src/main/xar-resources, README.md, and LICENSE -->
    <fileSets>
        <fileSet>
            <directory>/Users/wessels/Development/github/Couchbase</directory>
            <includes>
                <include>README.md</include>
                <include>LICENSE</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>/Users/wessels/Development/github/Couchbase/src/main/xar-resources</directory>
        </fileSet>
    </fileSets>

    <!-- include the XQuery Library modules written in XQuery from this project -->
    <xquerySets>
        <!--<xquerySet>-->
            <!--<namespace>https://my-organisation.com/exist-db/ns/app/my-xquery-module</namespace>-->
            <!--<directory>/Users/wessels/Development/github/Couchbase/src/main/xquery</directory>-->
            <!--<includes>-->
                <!--<include>example-module.xqm</include>-->
            <!--</includes>-->
            <!--<outputDirectory>content</outputDirectory>-->
        <!--</xquerySet>-->
    </xquerySets>

    <!-- include the XQuery Library Module written in Java (JAR output) from this project -->
    <dependencySets>
        <dependencySet>
            <groupId>org.exist</groupId>
            <artifactId>couchbase</artifactId>
            <version>0.7.1-SNAPSHOT</version>
        </dependencySet>
        <dependencySet>
            <groupId>com.couchbase.client</groupId>
            <artifactId>java-client</artifactId>
            <version>2.5.2</version>
        </dependencySet>
        <dependencySet>
            <groupId>com.couchbase.client</groupId>
            <artifactId>core-io</artifactId>
            <version>1.5.2</version>
        </dependencySet>
        <dependencySet>
            <groupId>io.reactivex</groupId>
            <artifactId>rxjava</artifactId>
            <version>1.3.3</version>
        </dependencySet>
    </dependencySets>

    <!-- register the Java module to eXist-db -->
    <components>
        <resource>
            <public-uri>http://exist-db.org/couchbase/db</public-uri>
            <file>org.exist.couchbase.xquery.CouchbaseModule</file>
        </resource>
    </components>

</package>
